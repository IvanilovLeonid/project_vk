
# Проект: Контроль состояния контейнеров

Этот проект позволяет отслеживать статус контейнеров по их IP-адресам с помощью пинга. Если контейнер активен, он помечается как "Активен", если нет — как "Неактивен". Веб-интерфейс позволяет добавлять новые контейнеры и просматривать их статус.

## Как работает проект

Проект состоит из двух частей:
1. **Бэкенд (Go)** — Сервис, который сохраняет информацию о контейнерах, пингует их и предоставляет API для получения данных.
2. **Фронтенд (React)** — Веб-интерфейс, который отображает список контейнеров, их статус (активен/неактивен) и позволяет добавлять новые контейнеры.

### Как проект работает:
- **API для пинга контейнера**: Бэкенд пингует контейнеры по указанным IP-адресам и сохраняет время последнего пинга.
- **API для получения списка контейнеров**: Возвращает список контейнеров и их статус.
- **Фронтенд**: Отображает таблицу с контейнерами, их статус и возможность добавления новых контейнеров.

## Установка и запуск с Docker Compose

Чтобы развернуть проект с помощью Docker Compose, выполните следующие шаги:

### 1. Требования

Для работы с этим проектом у вас должен быть установлен **Docker** и **Docker Compose**. Если они не установлены, скачайте их с официальных сайтов:

- [Скачать Docker](https://www.docker.com/get-started)
- [Скачать Docker Compose](https://docs.docker.com/compose/install/)

### 2. Клонируйте репозиторий

Клонируйте репозиторий на ваш сервер или локальную машину:

```bash
git clone https://github.com/IvanilovLeonid/project_vk.git
cd project_vk
```

### 3. Настройка .env файла для базы данных

В папке backend уже есть настроенный файл `.env`:

```env
DATABASE_URL=postgres://user:password@db:5432/container_db?sslmode=disable
```

Замените `user`, `password`, и `container_db` на ваши параметры для базы данных, если хотите. Обратите внимание, что в Docker Compose контейнер базы данных будет называться `db`.

### 4. Запуск приложения с Docker Compose

После того, как вы настроили `.env` файл, вы можете запустить проект с помощью **Docker Compose**. В каталоге проекта выполните команду:

```bash
docker-compose up --build
```

Эта команда:
1. Соберет образы для бэкенда и фронтенда.
2. Запустит контейнеры для бэкенда (Go), фронтенда (React) и базы данных (PostgreSQL).
3. После успешного запуска сервер будет доступен по адресу `http://localhost:3000` (фронтенд) и API — `http://localhost:8081`.

### 5. Доступ к веб-интерфейсу

Откройте браузер и перейдите по следующему адресу:

```
http://localhost:3000
```

Вы увидите интерфейс для добавления контейнеров и просмотра их статуса.

### 6. Понимание IP-адреса контейнера

Для того, чтобы добавить контейнер, вам нужно знать его IP-адрес. В Docker-контейнерах IP-адрес можно узнать следующим образом:

**Для Docker контейнера**, выполните команду:

   ```bash
   docker inspect <container_name_or_id> | grep "IPAddress"
   ```

   Эта команда вернет IP-адрес контейнера.


### 7. Добавление контейнера

Чтобы добавить новый контейнер в систему:

1. Перейдите в веб-интерфейс (http://localhost:3000).
2. Введите IP-адрес контейнера в поле ввода.
3. Нажмите кнопку **Добавить контейнер**.

Контейнер будет добавлен в базу данных и отобразится в таблице с его статусом.

### 8. Проверка состояния контейнера

В таблице будет отображаться:

- **IP-адрес контейнера**.
- **Время последнего пинга**.
- **Статус контейнера**: "Активен" (зеленый кружок) или "Неактивен" (красный кружок).

Если время последнего пинга совпадает с временем последнего успешного пинга, статус будет "Активен". Если они не совпадают, статус будет "Неактивен".

---

## Примечания

- Этот проект использует **PostgreSQL** как базу данных, которая запускается в контейнере.
- Контейнеры, добавленные в систему, пингуются каждые 10 секунд.
- Для стабильной работы пинга контейнеры должны быть доступны в сети и пингable.
